<div style="width:100%;text-align:center;font-family:Arial;font-size:20px;font-weight:bold;">Energy Consumption [kw/h]</div>
<div style="width:100%;text-align:center;"><span id="consumption_value" style="font-size:16px;font-family:Arial;font-weight:bold;"></span></div>
<canvas style="width: 100%;margin-top: 10px;" id="gauge"></canvas>


<script>
  let target = document.getElementById('gauge'); // your canvas element
  let gaugeObj = null;
  let lastValue = null;
  let doit;
  window.addEventListener('resize', function() {
    clearTimeout(doit);
    doit = setTimeout(drawGauge, 100);
  });
  let drawGauge = function() {
    gaugeObj = new Gauge(target)

	gaugeObj.animationSpeed = 10; // set animation speed (32 is default value)
    gaugeObj.minValue = 0;
    gaugeObj.maxValue = 300;
    gaugeObj.setOptions(opts);
    if (lastValue !== null)
    {
      gaugeObj.set(lastValue);
    }
  };
  $.when(
    $.getScript("/data/html/js/vendor/gaugejs.1.3.6.min.js"),
    $.getScript("/data/html/js/gauge.settings.js")
  ).done(function() {
    drawGauge();
    //get a initial value
    oaJsApi.dpGet("ExampleDP_Rpt3.", {
      success: function(data) {
        gaugeObj.set(data); // set actual value
        $("#consumption_value").html(data);
        lastValue = data;
      }
    });
    //register for updates
    oaJsApi.dpConnect("ExampleDP_Rpt3.", true, {
      success: function(data) {
        gaugeObj.set(data.value[0]);
        $("#consumption_value").html(data.value[0]);
        lastValue = data.value[0];
      }
    });
  });
</script>